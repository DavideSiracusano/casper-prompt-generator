

services:
  casper-app:
    # Se l'immagine non esiste localmente, docker-compose far√† il build usando il Dockerfile
    image: sirdavi/casper-prompt-generator:latest
    build:
      context: .
      dockerfile: Dockerfile

    # Nome del container per riconoscerlo facilmente
    container_name: casper-prompt-generator

    # Mappa la porta 3000 del container sulla 3000 della macchina host
    ports:
      - "3000:3000"

    # Legge le variabili d'ambiente dal file .env.local
    env_file:
      - .env.local
    
    # Variabili d'ambiente passate al container
    environment:
      # Ambiente di esecuzione in produzione
      NODE_ENV: production
      # Nota: GEMINI_API_KEY viene letta automaticamente dal file .env.local tramite env_file
      

    # Riavvia automaticamente il container se si ferma inaspettatamente
    restart: unless-stopped

